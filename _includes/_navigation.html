{% assign lang = page.lang | default: "zh" %}
{% assign t = site.data.translations[lang] %}
{% assign t_zh = site.data.translations["zh"] %}
{% assign t_en = site.data.translations["en"] %}
<div class="navigation-wrapper">
	<div class="site-name">
		{% if site.logo %}
		<a href="{{ site.github.url }}/"><img src="{{ site.github.url }}/images/{{ site.logo }} "></a>
		{% else %}
			{% if lang == "en" %}
		<a href="{{ site.github.url }}/en/">{{ t_en.site_title }}</a>
			{% else %}
		<a href="{{ site.github.url }}/" class="lang-zh">{{ t_zh.site_title }}</a>
		<a href="{{ site.github.url }}/en/" class="lang-en">{{ t_en.site_title }}</a>
			{% endif %}
		{% endif %}
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
			{% if lang == "en" %}
		    <ul>
		    	{% assign links = site.pages | where_exp: "item", "item.menuorder != nil" | where: "lang", "en" %}
		    	{% assign alllinks = links | concat: site.data.navigation | sort: 'menuorder' %}
		        {% for link in alllinks %}
			    	{% if link.menuorder %}{% assign url = link.url | prepend: site.github.url %}{% else %}{% assign url = link.url %}{% endif %}
                                   <li><a href="{{ url }}" {% if link.url contains 'http' %}target="_blank"{% endif %}>
				    {% if link.menutitle %}
				    {{link.menutitle}}
				    {% else %}
				    {{ link.title }}
				    {% endif %}
				</a></li>
				{% endfor %}
		    </ul>
			{% else %}
		    <ul class="lang-zh">
		    	{% assign zh_links = site.pages | where_exp: "item", "item.menuorder != nil" | where_exp: "item", "item.lang == nil" %}
		    	{% assign alllinks_zh = zh_links | concat: site.data.navigation | sort: 'menuorder' %}
		        {% for link in alllinks_zh %}
			    	{% if link.menuorder %}{% assign url = link.url | prepend: site.github.url %}{% else %}{% assign url = link.url %}{% endif %}
                                   <li><a href="{{ url }}" {% if link.url contains 'http' %}target="_blank"{% endif %}>
				    {% if link.menutitle %}
				    {{link.menutitle}}
				    {% else %}
				    {{ link.title }}
				    {% endif %}
				</a></li>
				{% endfor %}
		    </ul>
		    <ul class="lang-en">
		    	{% assign en_links = site.pages | where_exp: "item", "item.menuorder != nil" | where: "lang", "en" %}
		    	{% assign alllinks_en = en_links | concat: site.data.navigation | sort: 'menuorder' %}
		        {% for link in alllinks_en %}
			    	{% if link.menuorder %}{% assign url = link.url | prepend: site.github.url %}{% else %}{% assign url = link.url %}{% endif %}
                                   <li><a href="{{ url }}" {% if link.url contains 'http' %}target="_blank"{% endif %}>
				    {% if link.menutitle %}
				    {{link.menutitle}}
				    {% else %}
				    {{ link.title }}
				    {% endif %}
				</a></li>
				{% endfor %}
		    </ul>
			{% endif %}
		</nav>
	</div><!-- /.top-navigation -->
	<div class="nav-actions">
		{% if lang == "en" %}
		<a href="{{ t_en.ui.lang_switch_url }}" class="nav-action-btn lang-switch">{{ t_en.ui.lang_switch }}</a>
		{% else %}
		<a href="{{ t_zh.ui.lang_switch_url }}" class="nav-action-btn lang-switch lang-zh">{{ t_zh.ui.lang_switch }}</a>
		<a href="{{ t_en.ui.lang_switch_url }}" class="nav-action-btn lang-switch lang-en">{{ t_en.ui.lang_switch }}</a>
		{% endif %}
		<button id="theme-toggle" class="nav-action-btn theme-toggle" aria-label="Toggle dark mode">
			<i class="fa fa-sun-o" id="theme-icon"></i>
		</button>
	</div>
</div><!-- /.navigation-wrapper -->
